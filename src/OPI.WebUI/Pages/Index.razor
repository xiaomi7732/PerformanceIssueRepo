@page "/Manage"

<h2>Manage Registry</h2>

<NavLink href="/">Issues</NavLink>
<NavLink href="/Import">Import</NavLink>

@if (RegisteredItems.Any())
{
    @foreach (PerfIssueRegisterEntry entry in RegisteredItems)
    {
        <div class='card'>
            <div class="issue-item">
                <div class='issue-item-title'>
                    Issue #
                </div>
                <div>
                    @entry.PermanentId
                    @if(!string.IsNullOrEmpty(entry.LegacyId))
                    {
                        <div>(Legacy id: @entry.LegacyId)</div>
                    }
                </div>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>Is Active</div>
                <div>@entry.IsActive</div>
                <button id='activate-toggle-button' @onclick="() => ToggleActivateAsync(entry.PermanentId)">Press to change</button>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>Title</div>
                <div>@entry.Title</div>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>Description</div>
                <div>@entry.Description</div>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>Recommendation</div>
                <div>@entry.Recommendation</div>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>Rationale</div>
                <div>@entry.Rationale</div>
            </div>

            <div class="issue-item">
                <div class='issue-item-title'>HelpLink</div>
                @if (entry.DocURL is not null)
                {
                    <div><a href="@entry.DocURL" target="_blank">@entry.DocURL</a></div>
                }
                else
                {
                    <div>Not available.</div>
                }
            </div>
        </div>
    }
}
else
{
    <div>No registred entry.</div>
}
